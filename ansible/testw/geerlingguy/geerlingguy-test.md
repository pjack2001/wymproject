# geerlingguy各种角色的测试


## 

```

```

### 

```


```

## 环境

### 测试的yml文件

```yml

有些软件依赖于geerlingguy.repo-epel，比如ansible，pip，supervisor等


/media/xh/i/python/wymproject/ansible/testw/geerlingguy/geerlingguy-test.yml

$ cat geerlingguy-test.yml

---
- name: geerlingguy-test
  hosts: 172.17.8.242

  roles:
    - geerlingguy.repo-epel
    - geerlingguy.pip
    #- geerlingguy.ansible
    #- geerlingguy.docker
    #- geerlingguy.firewall
    #- geerlingguy.apache
    #- geerlingguy.htpasswd
    #- geerlingguy.nginx
    #- geerlingguy.haproxy
    #- geerlingguy.redis
    #- geerlingguy.nodejs
    #- geerlingguy.git
    #- geerlingguy.gitlab
    #- geerlingguy.gogs
    #- geerlingguy.mysql
    #- geerlingguy.jenkins
    #- geerlingguy.sonar
    #- geerlingguy.sonar-runner
    #- geerlingguy.kubernetes
    #- geerlingguy.samba
    #- geerlingguy.nfs
    #- geerlingguy.glusterfs
    #- geerlingguy.ntp
    #- geerlingguy.supervisor
    #- geerlingguy.tomcat6
    #- geerlingguy.
    #- geerlingguy.
    #- geerlingguy.
    #- geerlingguy.
    #- geerlingguy.
    #- geerlingguy.

```


## apache

### 安装记录

```
# w @ uw in /media/xh/i/python/wymproject/ansible/testw/geerlingguy on git:master x [15:07:45] C:2
$ ansible-playbook geerlingguy-test.yml -vv
ansible-playbook 2.7.8
  config file = /etc/ansible/ansible.cfg
  configured module search path = ['/home/w/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/local/lib/python3.6/dist-packages/ansible
  executable location = /usr/local/bin/ansible-playbook
  python version = 3.6.7 (default, Oct 22 2018, 11:32:17) [GCC 8.2.0]
Using /etc/ansible/ansible.cfg as config file
/etc/ansible/hosts did not meet host_list requirements, check plugin documentation if this is unexpected
/etc/ansible/hosts did not meet script requirements, check plugin documentation if this is unexpected

PLAYBOOK: geerlingguy-test.yml ********************************************************************
1 plays in geerlingguy-test.yml

PLAY [geerlingguy-test] ***************************************************************************

TASK [Gathering Facts] ****************************************************************************
task path: /media/xh/i/python/wymproject/ansible/testw/geerlingguy/geerlingguy-test.yml:2
ok: [172.17.8.242]
META: ran handlers

TASK [geerlingguy.apache : Include OS-specific variables.] ****************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:3
ok: [172.17.8.242] => {"ansible_facts": {"__apache_packages": ["httpd", "httpd-devel", "mod_ssl", "openssh"], "apache_conf_path": "/etc/httpd/conf.d", "apache_daemon": "httpd", "apache_daemon_path": "/usr/sbin/", "apache_ports_configuration_items": [{"line": "Listen {{ apache_listen_port }}", "regexp": "^Listen "}, {"line": "NameVirtualHost {{ apache_listen_ip }}:{{ apache_listen_port }}", "regexp": "^#?NameVirtualHost "}], "apache_server_root": "/etc/httpd", "apache_service": "httpd", "apache_vhosts_version": "2.2"}, "ansible_included_var_files": ["/home/w/.ansible/roles/geerlingguy.apache/vars/RedHat.yml"], "changed": false}

TASK [geerlingguy.apache : Include variables for Amazon Linux.] ***********************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:6
skipping: [172.17.8.242] => {"changed": false, "skip_reason": "Conditional result was False"}

TASK [geerlingguy.apache : Define apache_packages.] ***********************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:12
ok: [172.17.8.242] => {"ansible_facts": {"apache_packages": ["httpd", "httpd-devel", "mod_ssl", "openssh"]}, "changed": false}

TASK [geerlingguy.apache : include_tasks] *********************************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:18
included: /home/w/.ansible/roles/geerlingguy.apache/tasks/setup-RedHat.yml for 172.17.8.242

TASK [geerlingguy.apache : Ensure Apache is installed on RHEL.] ***********************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/setup-RedHat.yml:2
changed: [172.17.8.242] => {"changed": true, "msg": "http://ftp.sjtu.edu.cn/centos/7.6.1810/os/x86_64/Packages/apr-util-devel-1.5.2-6.el7.x86_64.rpm: [Errno 14] curl#7 - \"Failed to connect to 2001:da8:8000:6023::230: Network is unreachable\"\nTrying other mirror.\n", "rc": 0, "results": ["openssh-7.4p1-13.el7_4.x86_64 providing openssh is already installed", "Loaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: mirror.lzu.edu.cn\n * extras: mirrors.tuna.tsinghua.edu.cn\n * updates: mirrors.nwsuaf.edu.cn\nResolving Dependencies\n--> Running transaction check\n---> Package httpd.x86_64 0:2.4.6-88.el7.centos will be installed\n--> Processing Dependency: httpd-tools = 2.4.6-88.el7.centos for package: httpd-2.4.6-88.el7.centos.x86_64\n--> Processing Dependency: /etc/mime.types for package: httpd-2.4.6-88.el7.centos.x86_64\n--> Processing Dependency: libaprutil-1.so.0()(64bit) for package: httpd-2.4.6-88.el7.centos.x86_64\n--> Processing Dependency: libapr-1.so.0()(64bit) for package: httpd-2.4.6-88.el7.centos.x86_64\n---> Package httpd-devel.x86_64 0:2.4.6-88.el7.centos will be installed\n--> Processing Dependency: perl >= 5.004 for package: httpd-devel-2.4.6-88.el7.centos.x86_64\n--> Processing Dependency: perl(strict) for package: httpd-devel-2.4.6-88.el7.centos.x86_64\n--> Processing Dependency: apr-util-devel for package: httpd-devel-2.4.6-88.el7.centos.x86_64\n--> Processing Dependency: apr-devel for package: httpd-devel-2.4.6-88.el7.centos.x86_64\n--> Processing Dependency: /usr/bin/perl for package: httpd-devel-2.4.6-88.el7.centos.x86_64\n---> Package mod_ssl.x86_64 1:2.4.6-88.el7.centos will be installed\n--> Running transaction check\n---> Package apr.x86_64 0:1.4.8-3.el7_4.1 will be installed\n---> Package apr-devel.x86_64 0:1.4.8-3.el7_4.1 will be installed\n---> Package apr-util.x86_64 0:1.5.2-6.el7 will be installed\n---> Package apr-util-devel.x86_64 0:1.5.2-6.el7 will be installed\n--> Processing Dependency: openldap-devel(x86-64) for package: apr-util-devel-1.5.2-6.el7.x86_64\n--> Processing Dependency: libdb-devel(x86-64) for package: apr-util-devel-1.5.2-6.el7.x86_64\n--> Processing Dependency: expat-devel(x86-64) for package: apr-util-devel-1.5.2-6.el7.x86_64\n---> Package httpd-tools.x86_64 0:2.4.6-88.el7.centos will be installed\n---> Package mailcap.noarch 0:2.1.41-2.el7 will be installed\n---> Package perl.x86_64 4:5.16.3-294.el7_6 will be installed\n--> Processing Dependency: perl-libs = 4:5.16.3-294.el7_6 for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Socket) >= 1.3 for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Scalar::Util) >= 1.10 for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl-macros for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl-libs for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(threads::shared) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(threads) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(constant) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Time::Local) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Time::HiRes) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Storable) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Socket) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Scalar::Util) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Pod::Simple::XHTML) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Pod::Simple::Search) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Getopt::Long) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Filter::Util::Call) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(File::Temp) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(File::Spec::Unix) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(File::Spec::Functions) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(File::Spec) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(File::Path) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Exporter) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Cwd) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: perl(Carp) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Processing Dependency: libperl.so()(64bit) for package: 4:perl-5.16.3-294.el7_6.x86_64\n--> Running transaction check\n---> Package expat-devel.x86_64 0:2.1.0-10.el7_3 will be installed\n---> Package libdb-devel.x86_64 0:5.3.21-24.el7 will be installed\n--> Processing Dependency: libdb(x86-64) = 5.3.21-24.el7 for package: libdb-devel-5.3.21-24.el7.x86_64\n---> Package openldap-devel.x86_64 0:2.4.44-21.el7_6 will be installed\n--> Processing Dependency: openldap(x86-64) = 2.4.44-21.el7_6 for package: openldap-devel-2.4.44-21.el7_6.x86_64\n--> Processing Dependency: cyrus-sasl-devel(x86-64) for package: openldap-devel-2.4.44-21.el7_6.x86_64\n---> Package perl-Carp.noarch 0:1.26-244.el7 will be installed\n---> Package perl-Exporter.noarch 0:5.68-3.el7 will be installed\n---> Package perl-File-Path.noarch 0:2.09-2.el7 will be installed\n---> Package perl-File-Temp.noarch 0:0.23.01-3.el7 will be installed\n---> Package perl-Filter.x86_64 0:1.49-3.el7 will be installed\n---> Package perl-Getopt-Long.noarch 0:2.40-3.el7 will be installed\n--> Processing Dependency: perl(Pod::Usage) >= 1.14 for package: perl-Getopt-Long-2.40-3.el7.noarch\n--> Processing Dependency: perl(Text::ParseWords) for package: perl-Getopt-Long-2.40-3.el7.noarch\n---> Package perl-PathTools.x86_64 0:3.40-5.el7 will be installed\n---> Package perl-Pod-Simple.noarch 1:3.28-4.el7 will be installed\n--> Processing Dependency: perl(Pod::Escapes) >= 1.04 for package: 1:perl-Pod-Simple-3.28-4.el7.noarch\n--> Processing Dependency: perl(Encode) for package: 1:perl-Pod-Simple-3.28-4.el7.noarch\n---> Package perl-Scalar-List-Utils.x86_64 0:1.27-248.el7 will be installed\n---> Package perl-Socket.x86_64 0:2.010-4.el7 will be installed\n---> Package perl-Storable.x86_64 0:2.45-3.el7 will be installed\n---> Package perl-Time-HiRes.x86_64 4:1.9725-3.el7 will be installed\n---> Package perl-Time-Local.noarch 0:1.2300-2.el7 will be installed\n---> Package perl-constant.noarch 0:1.27-2.el7 will be installed\n---> Package perl-libs.x86_64 4:5.16.3-294.el7_6 will be installed\n---> Package perl-macros.x86_64 4:5.16.3-294.el7_6 will be installed\n---> Package perl-threads.x86_64 0:1.87-4.el7 will be installed\n---> Package perl-threads-shared.x86_64 0:1.43-6.el7 will be installed\n--> Running transaction check\n---> Package cyrus-sasl-devel.x86_64 0:2.1.26-23.el7 will be installed\n--> Processing Dependency: cyrus-sasl-lib(x86-64) = 2.1.26-23.el7 for package: cyrus-sasl-devel-2.1.26-23.el7.x86_64\n--> Processing Dependency: cyrus-sasl(x86-64) = 2.1.26-23.el7 for package: cyrus-sasl-devel-2.1.26-23.el7.x86_64\n---> Package libdb.x86_64 0:5.3.21-20.el7 will be updated\n--> Processing Dependency: libdb(x86-64) = 5.3.21-20.el7 for package: libdb-utils-5.3.21-20.el7.x86_64\n---> Package libdb.x86_64 0:5.3.21-24.el7 will be an update\n---> Package openldap.x86_64 0:2.4.44-5.el7 will be updated\n---> Package openldap.x86_64 0:2.4.44-21.el7_6 will be an update\n---> Package perl-Encode.x86_64 0:2.51-7.el7 will be installed\n---> Package perl-Pod-Escapes.noarch 1:1.04-294.el7_6 will be installed\n---> Package perl-Pod-Usage.noarch 0:1.63-3.el7 will be installed\n--> Processing Dependency: perl(Pod::Text) >= 3.15 for package: perl-Pod-Usage-1.63-3.el7.noarch\n--> Processing Dependency: perl-Pod-Perldoc for package: perl-Pod-Usage-1.63-3.el7.noarch\n---> Package perl-Text-ParseWords.noarch 0:3.29-4.el7 will be installed\n--> Running transaction check\n---> Package cyrus-sasl.x86_64 0:2.1.26-23.el7 will be installed\n---> Package cyrus-sasl-lib.x86_64 0:2.1.26-21.el7 will be updated\n---> Package cyrus-sasl-lib.x86_64 0:2.1.26-23.el7 will be an update\n---> Package libdb-utils.x86_64 0:5.3.21-20.el7 will be updated\n---> Package libdb-utils.x86_64 0:5.3.21-24.el7 will be an update\n---> Package perl-Pod-Perldoc.noarch 0:3.20-4.el7 will be installed\n--> Processing Dependency: perl(parent) for package: perl-Pod-Perldoc-3.20-4.el7.noarch\n--> Processing Dependency: perl(HTTP::Tiny) for package: perl-Pod-Perldoc-3.20-4.el7.noarch\n---> Package perl-podlators.noarch 0:2.5.1-3.el7 will be installed\n--> Running transaction check\n---> Package perl-HTTP-Tiny.noarch 0:0.033-3.el7 will be installed\n---> Package perl-parent.noarch 1:0.225-244.el7 will be installed\n--> Finished Dependency Resolution\n\nDependencies Resolved\n\n================================================================================\n Package                   Arch      Version                   Repository  Size\n================================================================================\nInstalling:\n httpd                     x86_64    2.4.6-88.el7.centos       base       2.7 M\n httpd-devel               x86_64    2.4.6-88.el7.centos       base       196 k\n mod_ssl                   x86_64    1:2.4.6-88.el7.centos     base       112 k\nInstalling for dependencies:\n apr                       x86_64    1.4.8-3.el7_4.1           base       103 k\n apr-devel                 x86_64    1.4.8-3.el7_4.1           base       188 k\n apr-util                  x86_64    1.5.2-6.el7               base        92 k\n apr-util-devel            x86_64    1.5.2-6.el7               base        76 k\n cyrus-sasl                x86_64    2.1.26-23.el7             base        88 k\n cyrus-sasl-devel          x86_64    2.1.26-23.el7             base       310 k\n expat-devel               x86_64    2.1.0-10.el7_3            base        57 k\n httpd-tools               x86_64    2.4.6-88.el7.centos       base        90 k\n libdb-devel               x86_64    5.3.21-24.el7             base        38 k\n mailcap                   noarch    2.1.41-2.el7              base        31 k\n openldap-devel            x86_64    2.4.44-21.el7_6           updates    804 k\n perl                      x86_64    4:5.16.3-294.el7_6        updates    8.0 M\n perl-Carp                 noarch    1.26-244.el7              base        19 k\n perl-Encode               x86_64    2.51-7.el7                base       1.5 M\n perl-Exporter             noarch    5.68-3.el7                base        28 k\n perl-File-Path            noarch    2.09-2.el7                base        26 k\n perl-File-Temp            noarch    0.23.01-3.el7             base        56 k\n perl-Filter               x86_64    1.49-3.el7                base        76 k\n perl-Getopt-Long          noarch    2.40-3.el7                base        56 k\n perl-HTTP-Tiny            noarch    0.033-3.el7               base        38 k\n perl-PathTools            x86_64    3.40-5.el7                base        82 k\n perl-Pod-Escapes          noarch    1:1.04-294.el7_6          updates     51 k\n perl-Pod-Perldoc          noarch    3.20-4.el7                base        87 k\n perl-Pod-Simple           noarch    1:3.28-4.el7              base       216 k\n perl-Pod-Usage            noarch    1.63-3.el7                base        27 k\n perl-Scalar-List-Utils    x86_64    1.27-248.el7              base        36 k\n perl-Socket               x86_64    2.010-4.el7               base        49 k\n perl-Storable             x86_64    2.45-3.el7                base        77 k\n perl-Text-ParseWords      noarch    3.29-4.el7                base        14 k\n perl-Time-HiRes           x86_64    4:1.9725-3.el7            base        45 k\n perl-Time-Local           noarch    1.2300-2.el7              base        24 k\n perl-constant             noarch    1.27-2.el7                base        19 k\n perl-libs                 x86_64    4:5.16.3-294.el7_6        updates    688 k\n perl-macros               x86_64    4:5.16.3-294.el7_6        updates     44 k\n perl-parent               noarch    1:0.225-244.el7           base        12 k\n perl-podlators            noarch    2.5.1-3.el7               base       112 k\n perl-threads              x86_64    1.87-4.el7                base        49 k\n perl-threads-shared       x86_64    1.43-6.el7                base        39 k\nUpdating for dependencies:\n cyrus-sasl-lib            x86_64    2.1.26-23.el7             base       155 k\n libdb                     x86_64    5.3.21-24.el7             base       720 k\n libdb-utils               x86_64    5.3.21-24.el7             base       132 k\n openldap                  x86_64    2.4.44-21.el7_6           updates    356 k\n\nTransaction Summary\n================================================================================\nInstall  3 Packages (+38 Dependent packages)\nUpgrade             (  4 Dependent packages)\n\nTotal download size: 18 M\nDownloading packages:\nNo Presto metadata available for base\n--------------------------------------------------------------------------------\nTotal                                              1.0 MB/s |  18 MB  00:17     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Updating   : libdb-5.3.21-24.el7.x86_64                                  1/49 \n  Installing : apr-1.4.8-3.el7_4.1.x86_64                                  2/49 \n  Installing : apr-util-1.5.2-6.el7.x86_64                                 3/49 \n  Updating   : cyrus-sasl-lib-2.1.26-23.el7.x86_64                         4/49 \n  Updating   : openldap-2.4.44-21.el7_6.x86_64                             5/49 \n  Installing : apr-devel-1.4.8-3.el7_4.1.x86_64                            6/49 \n  Installing : cyrus-sasl-2.1.26-23.el7.x86_64                             7/49 \n  Installing : cyrus-sasl-devel-2.1.26-23.el7.x86_64                       8/49 \n  Installing : openldap-devel-2.4.44-21.el7_6.x86_64                       9/49 \n  Installing : httpd-tools-2.4.6-88.el7.centos.x86_64                     10/49 \n  Installing : libdb-devel-5.3.21-24.el7.x86_64                           11/49 \n  Installing : 1:perl-parent-0.225-244.el7.noarch                         12/49 \n  Installing : perl-HTTP-Tiny-0.033-3.el7.noarch                          13/49 \n  Installing : perl-podlators-2.5.1-3.el7.noarch                          14/49 \n  Installing : perl-Pod-Perldoc-3.20-4.el7.noarch                         15/49 \n  Installing : 1:perl-Pod-Escapes-1.04-294.el7_6.noarch                   16/49 \n  Installing : perl-Text-ParseWords-3.29-4.el7.noarch                     17/49 \n  Installing : perl-Encode-2.51-7.el7.x86_64                              18/49 \n  Installing : perl-Pod-Usage-1.63-3.el7.noarch                           19/49 \n  Installing : 4:perl-libs-5.16.3-294.el7_6.x86_64                        20/49 \n  Installing : 4:perl-macros-5.16.3-294.el7_6.x86_64                      21/49 \n  Installing : 4:perl-Time-HiRes-1.9725-3.el7.x86_64                      22/49 \n  Installing : perl-Exporter-5.68-3.el7.noarch                            23/49 \n  Installing : perl-constant-1.27-2.el7.noarch                            24/49 \n  Installing : perl-Time-Local-1.2300-2.el7.noarch                        25/49 \n  Installing : perl-Socket-2.010-4.el7.x86_64                             26/49 \n  Installing : perl-Carp-1.26-244.el7.noarch                              27/49 \n  Installing : perl-Storable-2.45-3.el7.x86_64                            28/49 \n  Installing : perl-PathTools-3.40-5.el7.x86_64                           29/49 \n  Installing : perl-Scalar-List-Utils-1.27-248.el7.x86_64                 30/49 \n  Installing : 1:perl-Pod-Simple-3.28-4.el7.noarch                        31/49 \n  Installing : perl-File-Temp-0.23.01-3.el7.noarch                        32/49 \n  Installing : perl-File-Path-2.09-2.el7.noarch                           33/49 \n  Installing : perl-threads-shared-1.43-6.el7.x86_64                      34/49 \n  Installing : perl-threads-1.87-4.el7.x86_64                             35/49 \n  Installing : perl-Filter-1.49-3.el7.x86_64                              36/49 \n  Installing : perl-Getopt-Long-2.40-3.el7.noarch                         37/49 \n  Installing : 4:perl-5.16.3-294.el7_6.x86_64                             38/49 \n  Installing : expat-devel-2.1.0-10.el7_3.x86_64                          39/49 \n  Installing : apr-util-devel-1.5.2-6.el7.x86_64                          40/49 \n  Installing : mailcap-2.1.41-2.el7.noarch                                41/49 \n  Installing : httpd-2.4.6-88.el7.centos.x86_64                           42/49 \n  Installing : 1:mod_ssl-2.4.6-88.el7.centos.x86_64                       43/49 \n  Installing : httpd-devel-2.4.6-88.el7.centos.x86_64                     44/49 \n  Updating   : libdb-utils-5.3.21-24.el7.x86_64                           45/49 \n  Cleanup    : openldap-2.4.44-5.el7.x86_64                               46/49 \n  Cleanup    : cyrus-sasl-lib-2.1.26-21.el7.x86_64                        47/49 \n  Cleanup    : libdb-utils-5.3.21-20.el7.x86_64                           48/49 \n  Cleanup    : libdb-5.3.21-20.el7.x86_64                                 49/49 \n  Verifying  : perl-HTTP-Tiny-0.033-3.el7.noarch                           1/49 \n  Verifying  : perl-Pod-Perldoc-3.20-4.el7.noarch                          2/49 \n  Verifying  : mailcap-2.1.41-2.el7.noarch                                 3/49 \n  Verifying  : perl-threads-shared-1.43-6.el7.x86_64                       4/49 \n  Verifying  : 4:perl-Time-HiRes-1.9725-3.el7.x86_64                       5/49 \n  Verifying  : 1:perl-Pod-Escapes-1.04-294.el7_6.noarch                    6/49 \n  Verifying  : libdb-devel-5.3.21-24.el7.x86_64                            7/49 \n  Verifying  : perl-Exporter-5.68-3.el7.noarch                             8/49 \n  Verifying  : perl-constant-1.27-2.el7.noarch                             9/49 \n  Verifying  : perl-PathTools-3.40-5.el7.x86_64                           10/49 \n  Verifying  : 1:mod_ssl-2.4.6-88.el7.centos.x86_64                       11/49 \n  Verifying  : expat-devel-2.1.0-10.el7_3.x86_64                          12/49 \n  Verifying  : httpd-devel-2.4.6-88.el7.centos.x86_64                     13/49 \n  Verifying  : 1:perl-parent-0.225-244.el7.noarch                         14/49 \n  Verifying  : 4:perl-libs-5.16.3-294.el7_6.x86_64                        15/49 \n  Verifying  : perl-File-Temp-0.23.01-3.el7.noarch                        16/49 \n  Verifying  : 1:perl-Pod-Simple-3.28-4.el7.noarch                        17/49 \n  Verifying  : httpd-tools-2.4.6-88.el7.centos.x86_64                     18/49 \n  Verifying  : perl-Time-Local-1.2300-2.el7.noarch                        19/49 \n  Verifying  : openldap-devel-2.4.44-21.el7_6.x86_64                      20/49 \n  Verifying  : perl-Text-ParseWords-3.29-4.el7.noarch                     21/49 \n  Verifying  : cyrus-sasl-devel-2.1.26-23.el7.x86_64                      22/49 \n  Verifying  : 4:perl-macros-5.16.3-294.el7_6.x86_64                      23/49 \n  Verifying  : perl-Socket-2.010-4.el7.x86_64                             24/49 \n  Verifying  : cyrus-sasl-2.1.26-23.el7.x86_64                            25/49 \n  Verifying  : libdb-5.3.21-24.el7.x86_64                                 26/49 \n  Verifying  : perl-Carp-1.26-244.el7.noarch                              27/49 \n  Verifying  : libdb-utils-5.3.21-24.el7.x86_64                           28/49 \n  Verifying  : apr-util-1.5.2-6.el7.x86_64                                29/49 \n  Verifying  : perl-Storable-2.45-3.el7.x86_64                            30/49 \n  Verifying  : perl-Scalar-List-Utils-1.27-248.el7.x86_64                 31/49 \n  Verifying  : httpd-2.4.6-88.el7.centos.x86_64                           32/49 \n  Verifying  : perl-Pod-Usage-1.63-3.el7.noarch                           33/49 \n  Verifying  : apr-1.4.8-3.el7_4.1.x86_64                                 34/49 \n  Verifying  : perl-Encode-2.51-7.el7.x86_64                              35/49 \n  Verifying  : perl-podlators-2.5.1-3.el7.noarch                          36/49 \n  Verifying  : apr-devel-1.4.8-3.el7_4.1.x86_64                           37/49 \n  Verifying  : perl-File-Path-2.09-2.el7.noarch                           38/49 \n  Verifying  : apr-util-devel-1.5.2-6.el7.x86_64                          39/49 \n  Verifying  : perl-threads-1.87-4.el7.x86_64                             40/49 \n  Verifying  : perl-Filter-1.49-3.el7.x86_64                              41/49 \n  Verifying  : perl-Getopt-Long-2.40-3.el7.noarch                         42/49 \n  Verifying  : 4:perl-5.16.3-294.el7_6.x86_64                             43/49 \n  Verifying  : cyrus-sasl-lib-2.1.26-23.el7.x86_64                        44/49 \n  Verifying  : openldap-2.4.44-21.el7_6.x86_64                            45/49 \n  Verifying  : cyrus-sasl-lib-2.1.26-21.el7.x86_64                        46/49 \n  Verifying  : libdb-utils-5.3.21-20.el7.x86_64                           47/49 \n  Verifying  : openldap-2.4.44-5.el7.x86_64                               48/49 \n  Verifying  : libdb-5.3.21-20.el7.x86_64                                 49/49 \n\nInstalled:\n  httpd.x86_64 0:2.4.6-88.el7.centos   httpd-devel.x86_64 0:2.4.6-88.el7.centos\n  mod_ssl.x86_64 1:2.4.6-88.el7.centos\n\nDependency Installed:\n  apr.x86_64 0:1.4.8-3.el7_4.1                                                  \n  apr-devel.x86_64 0:1.4.8-3.el7_4.1                                            \n  apr-util.x86_64 0:1.5.2-6.el7                                                 \n  apr-util-devel.x86_64 0:1.5.2-6.el7                                           \n  cyrus-sasl.x86_64 0:2.1.26-23.el7                                             \n  cyrus-sasl-devel.x86_64 0:2.1.26-23.el7                                       \n  expat-devel.x86_64 0:2.1.0-10.el7_3                                           \n  httpd-tools.x86_64 0:2.4.6-88.el7.centos                                      \n  libdb-devel.x86_64 0:5.3.21-24.el7                                            \n  mailcap.noarch 0:2.1.41-2.el7                                                 \n  openldap-devel.x86_64 0:2.4.44-21.el7_6                                       \n  perl.x86_64 4:5.16.3-294.el7_6                                                \n  perl-Carp.noarch 0:1.26-244.el7                                               \n  perl-Encode.x86_64 0:2.51-7.el7                                               \n  perl-Exporter.noarch 0:5.68-3.el7                                             \n  perl-File-Path.noarch 0:2.09-2.el7                                            \n  perl-File-Temp.noarch 0:0.23.01-3.el7                                         \n  perl-Filter.x86_64 0:1.49-3.el7                                               \n  perl-Getopt-Long.noarch 0:2.40-3.el7                                          \n  perl-HTTP-Tiny.noarch 0:0.033-3.el7                                           \n  perl-PathTools.x86_64 0:3.40-5.el7                                            \n  perl-Pod-Escapes.noarch 1:1.04-294.el7_6                                      \n  perl-Pod-Perldoc.noarch 0:3.20-4.el7                                          \n  perl-Pod-Simple.noarch 1:3.28-4.el7                                           \n  perl-Pod-Usage.noarch 0:1.63-3.el7                                            \n  perl-Scalar-List-Utils.x86_64 0:1.27-248.el7                                  \n  perl-Socket.x86_64 0:2.010-4.el7                                              \n  perl-Storable.x86_64 0:2.45-3.el7                                             \n  perl-Text-ParseWords.noarch 0:3.29-4.el7                                      \n  perl-Time-HiRes.x86_64 4:1.9725-3.el7                                         \n  perl-Time-Local.noarch 0:1.2300-2.el7                                         \n  perl-constant.noarch 0:1.27-2.el7                                             \n  perl-libs.x86_64 4:5.16.3-294.el7_6                                           \n  perl-macros.x86_64 4:5.16.3-294.el7_6                                         \n  perl-parent.noarch 1:0.225-244.el7                                            \n  perl-podlators.noarch 0:2.5.1-3.el7                                           \n  perl-threads.x86_64 0:1.87-4.el7                                              \n  perl-threads-shared.x86_64 0:1.43-6.el7                                       \n\nDependency Updated:\n  cyrus-sasl-lib.x86_64 0:2.1.26-23.el7    libdb.x86_64 0:5.3.21-24.el7        \n  libdb-utils.x86_64 0:5.3.21-24.el7       openldap.x86_64 0:2.4.44-21.el7_6   \n\nComplete!\n"]}

TASK [geerlingguy.apache : Get installed version of Apache.] **************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:21
ok: [172.17.8.242] => {"changed": false, "cmd": ["/usr/sbin/httpd", "-v"], "delta": "0:00:00.060204", "end": "2019-03-11 09:37:08.930738", "rc": 0, "start": "2019-03-11 09:37:08.870534", "stderr": "", "stderr_lines": [], "stdout": "Server version: Apache/2.4.6 (CentOS)\nServer built:   Nov  5 2018 01:47:09", "stdout_lines": ["Server version: Apache/2.4.6 (CentOS)", "Server built:   Nov  5 2018 01:47:09"]}

TASK [geerlingguy.apache : Create apache_version variable.] ***************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:27
ok: [172.17.8.242] => {"ansible_facts": {"apache_version": "2.4.6"}, "changed": false}

TASK [geerlingguy.apache : Include Apache 2.2 variables.] *****************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:31
skipping: [172.17.8.242] => {"changed": false, "skip_reason": "Conditional result was False"}

TASK [geerlingguy.apache : Include Apache 2.4 variables.] *****************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:35
ok: [172.17.8.242] => {"ansible_facts": {"apache_default_vhost_filename": "000-default.conf", "apache_ports_configuration_items": [{"line": "Listen {{ apache_listen_port }}", "regexp": "^Listen "}], "apache_vhosts_version": "2.4"}, "ansible_included_var_files": ["/home/w/.ansible/roles/geerlingguy.apache/vars/apache-24.yml"], "changed": false}

TASK [geerlingguy.apache : Configure Apache.] *****************************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:40
included: /home/w/.ansible/roles/geerlingguy.apache/tasks/configure-RedHat.yml for 172.17.8.242

TASK [geerlingguy.apache : Configure Apache.] *****************************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/configure-RedHat.yml:2
ok: [172.17.8.242] => (item={'regexp': '^Listen ', 'line': 'Listen 80'}) => {"backup": "", "changed": false, "item": {"line": "Listen 80", "regexp": "^Listen "}, "msg": ""}

TASK [geerlingguy.apache : Check whether certificates defined in vhosts exist.] *******************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/configure-RedHat.yml:11

TASK [geerlingguy.apache : Add apache vhosts configuration.] **************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/configure-RedHat.yml:16
NOTIFIED HANDLER geerlingguy.apache : restart apache for 172.17.8.242
changed: [172.17.8.242] => {"changed": true, "checksum": "50464e9eb83c87b5efaadf0f81528eec5491f0e8", "dest": "/etc/httpd/conf.d/vhosts.conf", "gid": 0, "group": "root", "md5sum": "937043e1d18d73cc4386b584a516d80a", "mode": "0644", "owner": "root", "secontext": "system_u:object_r:httpd_config_t:s0", "size": 257, "src": "/root/.ansible/tmp/ansible-tmp-1552374520.0114691-137898697003316/source", "state": "file", "uid": 0}

TASK [geerlingguy.apache : Ensure Apache has selected state and enabled on boot.] *****************
task path: /home/w/.ansible/roles/geerlingguy.apache/tasks/main.yml:43
changed: [172.17.8.242] => {"changed": true, "enabled": true, "name": "httpd", "state": "started", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "basic.target remote-fs.target network.target -.mount system.slice tmp.mount nss-lookup.target systemd-journald.socket", "AllowIsolate": "no", "AmbientCapabilities": "0", "AssertResult": "no", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "18446744073709551615", "CPUAccounting": "no", "CPUQuotaPerSecUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "18446744073709551615", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "18446744073709551615", "ConditionResult": "no", "ConditionTimestampMonotonic": "0", "Conflicts": "shutdown.target", "ControlPID": "0", "DefaultDependencies": "yes", "Delegate": "no", "Description": "The Apache HTTP Server", "DevicePolicy": "auto", "Documentation": "man:httpd(8) man:apachectl(8)", "EnvironmentFile": "/etc/sysconfig/httpd (ignore_errors=no)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/usr/sbin/httpd ; argv[]=/usr/sbin/httpd $OPTIONS -k graceful ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/httpd ; argv[]=/usr/sbin/httpd $OPTIONS -DFOREGROUND ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStop": "{ path=/bin/kill ; argv[]=/bin/kill -WINCH ${MAINPID} ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FragmentPath": "/usr/lib/systemd/system/httpd.service", "GuessMainPID": "yes", "IOScheduling": "0", "Id": "httpd.service", "IgnoreOnIsolate": "no", "IgnoreOnSnapshot": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestampMonotonic": "0", "JobTimeoutAction": "none", "JobTimeoutUSec": "0", "KillMode": "control-group", "KillSignal": "18", "LimitAS": "18446744073709551615", "LimitCORE": "18446744073709551615", "LimitCPU": "18446744073709551615", "LimitDATA": "18446744073709551615", "LimitFSIZE": "18446744073709551615", "LimitLOCKS": "18446744073709551615", "LimitMEMLOCK": "65536", "LimitMSGQUEUE": "819200", "LimitNICE": "0", "LimitNOFILE": "4096", "LimitNPROC": "11321", "LimitRSS": "18446744073709551615", "LimitRTPRIO": "0", "LimitRTTIME": "18446744073709551615", "LimitSIGPENDING": "11321", "LimitSTACK": "18446744073709551615", "LoadState": "loaded", "MainPID": "0", "MemoryAccounting": "no", "MemoryCurrent": "18446744073709551615", "MemoryLimit": "18446744073709551615", "MountFlags": "0", "Names": "httpd.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "PermissionsStartOnly": "no", "PrivateDevices": "no", "PrivateNetwork": "no", "PrivateTmp": "yes", "ProtectHome": "no", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterExit": "no", "Requires": "basic.target -.mount", "RequiresMountsFor": "/var/tmp", "Restart": "no", "RestartUSec": "100ms", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitInterval": "10000000", "StartupBlockIOWeight": "18446744073709551615", "StartupCPUShares": "18446744073709551615", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "0", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "no", "TasksCurrent": "18446744073709551615", "TasksMax": "18446744073709551615", "TimeoutStartUSec": "1min 30s", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UMask": "0022", "UnitFilePreset": "disabled", "UnitFileState": "disabled", "Wants": "system.slice", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

RUNNING HANDLER [geerlingguy.apache : restart apache] *********************************************
task path: /home/w/.ansible/roles/geerlingguy.apache/handlers/main.yml:2
changed: [172.17.8.242] => {"changed": true, "name": "httpd", "state": "started", "status": {"ActiveEnterTimestamp": "一 2019-03-11 09:37:13 UTC", "ActiveEnterTimestampMonotonic": "84865167819", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "remote-fs.target tmp.mount system.slice nss-lookup.target network.target systemd-journald.socket basic.target -.mount", "AllowIsolate": "no", "AmbientCapabilities": "0", "AssertResult": "yes", "AssertTimestamp": "一 2019-03-11 09:37:13 UTC", "AssertTimestampMonotonic": "84864871983", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "18446744073709551615", "CPUAccounting": "no", "CPUQuotaPerSecUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "18446744073709551615", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "18446744073709551615", "ConditionResult": "yes", "ConditionTimestamp": "一 2019-03-11 09:37:13 UTC", "ConditionTimestampMonotonic": "84864871982", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/httpd.service", "ControlPID": "0", "DefaultDependencies": "yes", "Delegate": "no", "Description": "The Apache HTTP Server", "DevicePolicy": "auto", "Documentation": "man:httpd(8) man:apachectl(8)", "EnvironmentFile": "/etc/sysconfig/httpd (ignore_errors=no)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "29444", "ExecMainStartTimestamp": "一 2019-03-11 09:37:13 UTC", "ExecMainStartTimestampMonotonic": "84864896199", "ExecMainStatus": "0", "ExecReload": "{ path=/usr/sbin/httpd ; argv[]=/usr/sbin/httpd $OPTIONS -k graceful ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/httpd ; argv[]=/usr/sbin/httpd $OPTIONS -DFOREGROUND ; ignore_errors=no ; start_time=[一 2019-03-11 09:37:13 UTC] ; stop_time=[n/a] ; pid=29444 ; code=(null) ; status=0/0 }", "ExecStop": "{ path=/bin/kill ; argv[]=/bin/kill -WINCH ${MAINPID} ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FragmentPath": "/usr/lib/systemd/system/httpd.service", "GuessMainPID": "yes", "IOScheduling": "0", "Id": "httpd.service", "IgnoreOnIsolate": "no", "IgnoreOnSnapshot": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "一 2019-03-11 09:37:13 UTC", "InactiveExitTimestampMonotonic": "84864896470", "JobTimeoutAction": "none", "JobTimeoutUSec": "0", "KillMode": "control-group", "KillSignal": "18", "LimitAS": "18446744073709551615", "LimitCORE": "18446744073709551615", "LimitCPU": "18446744073709551615", "LimitDATA": "18446744073709551615", "LimitFSIZE": "18446744073709551615", "LimitLOCKS": "18446744073709551615", "LimitMEMLOCK": "65536", "LimitMSGQUEUE": "819200", "LimitNICE": "0", "LimitNOFILE": "4096", "LimitNPROC": "11321", "LimitRSS": "18446744073709551615", "LimitRTPRIO": "0", "LimitRTTIME": "18446744073709551615", "LimitSIGPENDING": "11321", "LimitSTACK": "18446744073709551615", "LoadState": "loaded", "MainPID": "29444", "MemoryAccounting": "no", "MemoryCurrent": "18446744073709551615", "MemoryLimit": "18446744073709551615", "MountFlags": "0", "Names": "httpd.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "PermissionsStartOnly": "no", "PrivateDevices": "no", "PrivateNetwork": "no", "PrivateTmp": "yes", "ProtectHome": "no", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterExit": "no", "Requires": "basic.target -.mount", "RequiresMountsFor": "/var/tmp", "Restart": "no", "RestartUSec": "100ms", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitInterval": "10000000", "StartupBlockIOWeight": "18446744073709551615", "StartupCPUShares": "18446744073709551615", "StatusErrno": "0", "StatusText": "Processing requests...", "StopWhenUnneeded": "no", "SubState": "running", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "0", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "no", "TasksCurrent": "18446744073709551615", "TasksMax": "18446744073709551615", "TimeoutStartUSec": "1min 30s", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UMask": "0022", "UnitFilePreset": "disabled", "UnitFileState": "enabled", "WantedBy": "multi-user.target", "Wants": "system.slice", "WatchdogTimestamp": "一 2019-03-11 09:37:13 UTC", "WatchdogTimestampMonotonic": "84865167717", "WatchdogUSec": "0"}}
META: ran handlers
META: ran handlers

PLAY RECAP ****************************************************************************************
172.17.8.242               : ok=13   changed=4    unreachable=0    failed=0   



```











